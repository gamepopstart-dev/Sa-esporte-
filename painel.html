<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SA ESPORTE</title>

<style>

body{
background:#0f172a;
color:white;
font-family:Arial;
margin:0;
}

.topo{
background:#1e3a8a;
padding:15px;
display:flex;
gap:10px;
align-items:center;
}

button{
background:#22c55e;
border:none;
color:white;
padding:8px;
cursor:pointer;
}

.container{
padding:10px;
}

.jogo{
background:#1e293b;
margin:10px 0;
padding:10px;
border-radius:5px;
}

.odd{
background:#facc15;
color:black;
padding:5px 10px;
margin:5px;
display:inline-block;
cursor:pointer;
border-radius:5px;
font-weight:bold;
}

.odd:hover{
background:#fde047;
}

input{
padding:5px;
}

</style>

</head>
<body>

<div class="topo">

<b>SA ESPORTE</b>

<button onclick="logout()">Sair</button>

<button onclick="location.href='admin.html'">
Admin
</button>

</div>

<div class="container">

<h3>Jogos</h3>

<div id="jogos">
Carregando jogos...
</div>

<h3>Bilhete</h3>

<div id="listaBilhete"></div>

Valor:
<input id="valor" type="number" value="10">

<button onclick="finalizar()">Apostar</button>

</div>

<script>

// proteção login
if(localStorage.getItem("logado")!="sim"){
location.href="login.html";
}

// SUA API KEY
var apiKey="144aa991d7cd08d8f337c28d3ad2bbeb";

// bilhete
var bilhete=[];

// logout
function logout(){

localStorage.removeItem("logado");

location.href="login.html";

}

// carregar jogos
function carregar(){

fetch("https://api.sportdataapi.com/api/v1/soccer/matches?apikey="+apiKey+"&season_id=3161")

.then(response=>response.json())

.then(data=>{

console.log(data);

if(!data.data){

document.getElementById("jogos").innerHTML="Erro ao carregar jogos";
return;

}

var html="";

data.data.slice(0,20).forEach(jogo=>{

var casa=jogo.home_team.name;
var fora=jogo.away_team.name;

var odd1=(Math.random()*3+1).toFixed(2);
var oddx=(Math.random()*3+1).toFixed(2);
var odd2=(Math.random()*3+1).toFixed(2);

html+=`

<div class="jogo">

<b>${casa} vs ${fora}</b>

<br><br>

<span class="odd" onclick="apostar('${casa}','${fora}','Casa',${odd1})">
${odd1}
</span>

<span class="odd" onclick="apostar('${casa}','${fora}','Empate',${oddx})">
${oddx}
</span>

<span class="odd" onclick="apostar('${casa}','${fora}','Fora',${odd2})">
${odd2}
</span>

</div>

`;

});

document.getElementById("jogos").innerHTML=html;

})

.catch(error=>{

document.getElementById("jogos").innerHTML="Erro API ou chave inválida";

});

}

// adicionar aposta
function apostar(casa,fora,tipo,odd){

bilhete.push({

casa:casa,
fora:fora,
tipo:tipo,
odd:odd

});

mostrarBilhete();

}

// mostrar bilhete
function mostrarBilhete(){

var html="";

bilhete.forEach(b=>{

html+=`

<div>

${b.casa} vs ${b.fora}

<br>

${b.tipo} @ ${b.odd}

<hr>

</div>

`;

});

document.getElementById("listaBilhete").innerHTML=html;

}

// finalizar aposta
function finalizar(){

var valor=document.getElementById("valor").value;

if(bilhete.length==0){

alert("Selecione apostas");

return;

}

var totalOdd=1;

bilhete.forEach(b=>{

totalOdd*=b.odd;

});

var retorno=(valor*totalOdd).toFixed(2);

// salvar apostas
var apostas=JSON.parse(localStorage.getItem("apostas")||"[]");

apostas.push({

bilhete:bilhete,
valor:valor,
retorno:retorno,
data:new Date().toLocaleString()

});

localStorage.setItem("apostas",JSON.stringify(apostas));

alert("Aposta salva! Retorno: R$ "+retorno);

// limpar bilhete
bilhete=[];

mostrarBilhete();

}

// iniciar
carregar();

</script>

</body>
</html>
