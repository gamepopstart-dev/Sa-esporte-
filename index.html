<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB62bOVcwY2U7sh8QxLHKprxsO5qYddf8c",
    authDomain: "simuladoraposta.firebaseapp.com",
    projectId: "simuladoraposta",
    storageBucket: "simuladoraposta.firebasestorage.app",
    messagingSenderId: "96609178130",
    appId: "1:96609178130:web:215bc79f33c217c77ffecb"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Criar conta
  window.registrar = async function(email, senha) {
    try {
      const userCred = await createUserWithEmailAndPassword(auth, email, senha);

      await setDoc(doc(db, "users", userCred.user.uid), {
        saldo: 2000
      });

      alert("Conta criada com R$ 2000!");
    } catch (error) {
      alert(error.message);
    }
  };

  // Login
  window.login = async function(email, senha) {
    try {
      await signInWithEmailAndPassword(auth, email, senha);
      alert("Login realizado!");
    } catch (error) {
      alert(error.message);
    }
  };
</script>
