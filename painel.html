<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Painel SA ESPORTE</title>
<style>

body{
background:#0b1220;
color:white;
font-family:Arial;
}

.box{
background:#1e293b;
padding:10px;
margin:10px;
border-radius:5px;
}

button{
padding:8px;
background:#22c55e;
border:none;
color:white;
cursor:pointer;
}

.odd{
background:#facc15;
color:black;
padding:5px;
margin:5px;
display:inline-block;
cursor:pointer;
}

</style>
</head>
<body>

<div class="box">

Usuário: <span id="usuario"></span><br>
Saldo: R$ <span id="saldo"></span>

<br><br>

<button onclick="logout()">Sair</button>
<button onclick="window.location='admin.html'">Admin</button>

</div>

<div class="box">

<h3>Jogos</h3>

<div onclick="apostar('Time A vs Time B','Casa',1.5)" class="odd">
Time A vs Time B (1.5)
</div>

<div onclick="apostar('Time C vs Time D','Fora',2.0)" class="odd">
Time C vs Time D (2.0)
</div>

</div>

<div class="box">

<h3>Bilhete</h3>

<div id="bilhete">Nenhum</div>

Valor:
<input id="valor" value="10">

<button onclick="finalizar()">Apostar</button>

</div>

<div class="box">

<h3>Histórico</h3>

<div id="historico"></div>

</div>

<script>

var usuario = localStorage.getItem("usuario");

document.getElementById("usuario").innerText = usuario;

function atualizarSaldo(){

document.getElementById("saldo").innerText =
localStorage.getItem("saldo_"+usuario);

}

atualizarSaldo();

var bilhete=null;

function apostar(jogo,tipo,odd){

bilhete={
jogo,
tipo,
odd
};

document.getElementById("bilhete").innerHTML=
jogo+"<br>"+tipo+" @ "+odd;

}

function finalizar(){

var valor=parseFloat(document.getElementById("valor").value);

var saldo=parseFloat(localStorage.getItem("saldo_"+usuario));

if(valor>saldo){

alert("Saldo insuficiente");
return;

}

saldo-=valor;

localStorage.setItem("saldo_"+usuario,saldo);

var apostas=JSON.parse(localStorage.getItem("apostas")||"[]");

apostas.push({

usuario,
jogo:bilhete.jogo,
tipo:bilhete.tipo,
odd:bilhete.odd,
valor,
ganho:(valor*bilhete.odd).toFixed(2),
status:"Pendente"

});

localStorage.setItem("apostas",JSON.stringify(apostas));

alert("Aposta criada");

carregarHistorico();

atualizarSaldo();

}

function carregarHistorico(){

var apostas=JSON.parse(localStorage.getItem("apostas")||"[]");

var html="";

apostas.forEach(a=>{

if(a.usuario==usuario){

html+=`
<div>
${a.jogo}<br>
Valor: ${a.valor}<br>
Status: ${a.status}
<hr>
</div>
`;

}

});

document.getElementById("historico").innerHTML=html;

}

carregarHistorico();

function logout(){

localStorage.clear();

window.location="login.html";

}

</script>

</body>
</html>
