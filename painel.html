<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Painel - SA ESPORTE</title>

<style>

body{
background:#0f172a;
color:white;
font-family:Arial;
}

.topo{
background:#1e3a8a;
padding:15px;
}

.jogo{
background:#1e293b;
margin:10px;
padding:10px;
}

.odd{
background:#facc15;
color:black;
padding:5px;
margin:5px;
cursor:pointer;
display:inline-block;
}

button{
padding:10px;
margin:10px;
background:#22c55e;
border:none;
color:white;
}

</style>

</head>
<body>

<div class="topo">

SA ESPORTE

<button onclick="logout()">Sair</button>

<button onclick="location.href='admin.html'">
Admin
</button>

</div>

<h3>Jogos</h3>

<div id="jogos"></div>

<h3>Bilhete</h3>

<div id="bilhete"></div>

Valor:
<input id="valor" value="10">

<button onclick="finalizar()">Apostar</button>

<script>

if(localStorage.getItem("logado")!="sim"){

location.href="login.html";

}

var apiKey="144aa991d7cd08d8f337c28d3ad2bbeb";

var bilhete=[];

function logout(){

localStorage.removeItem("logado");

location.href="login.html";

}

function carregar(){

fetch("https://api.sportdataapi.com/api/v1/soccer/matches?apikey="+apiKey)

.then(r=>r.json())

.then(d=>{

var html="";

d.data.slice(0,10).forEach(j=>{

var o1=(Math.random()*3+1).toFixed(2);
var o2=(Math.random()*3+1).toFixed(2);
var o3=(Math.random()*3+1).toFixed(2);

html+=`
<div class=jogo>

${j.home_team.name} vs ${j.away_team.name}

<br>

<span class=odd onclick="add('${j.home_team.name}','Casa',${o1})">${o1}</span>

<span class=odd onclick="add('${j.home_team.name}','Empate',${o2})">${o2}</span>

<span class=odd onclick="add('${j.home_team.name}','Fora',${o3})">${o3}</span>

</div>
`;

});

jogos.innerHTML=html;

});

}

function add(time,tipo,odd){

bilhete.push({time,tipo,odd});

mostrar();

}

function mostrar(){

var html="";

bilhete.forEach(b=>{

html+=b.time+" "+b.tipo+" "+b.odd+"<br>";

});

bilhete.innerHTML=html;

}

function finalizar(){

var valor=valor.value;

var total=1;

bilhete.forEach(b=>total*=b.odd);

var ganho=valor*total;

var apostas=JSON.parse(localStorage.getItem("apostas")||"[]");

apostas.push({

bilhete,
valor,
ganho

});

localStorage.setItem("apostas",JSON.stringify(apostas));

alert("Aposta salva");

}

carregar();

</script>

</body>
</html>
